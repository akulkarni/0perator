# Development Guide

## Dev Mode for MCP Server

When developing 0perator, you want code changes to take effect immediately without rebuilding and reinstalling the binary. The `--dev` flag enables this workflow.

### Usage

```bash
go run ./cmd/0perator-mcp init --dev
```

### What it does

Instead of configuring IDEs to use the compiled `0perator` binary:

```json
{
  "mcpServers": {
    "0perator": {
      "command": "/usr/local/bin/0perator"
    }
  }
}
```

Dev mode configures IDEs to use `go run`:

```json
{
  "mcpServers": {
    "0perator": {
      "command": "sh",
      "args": ["/path/to/your/repo/cmd/0perator-mcp/scripts/run-source.sh"]
    }
  }
}
```

### Why use dev mode

1. **Instant feedback** - Code changes take effect on the next MCP server restart (when you restart your IDE or reconnect)
2. **No rebuild step** - Skip the `go build && go install` cycle during development
3. **Easy debugging** - Add print statements or modify behavior without deployment friction

### Workflow

1. Run `0perator init --dev` from the repository root
2. Select which IDEs to configure
3. Make code changes to the MCP server
4. Restart your IDE (or reconnect to the MCP server) to pick up changes

### Switching back to production mode

Run `0perator init` without the `--dev` flag to reconfigure IDEs to use the compiled binary.

## Eval Script

The `eval/` directory contains a Python script for testing the MCP server with Claude Code SDK. This is useful for evaluating how Claude interacts with the 0perator tools.

### Running an evaluation

```bash
cd eval
uv run eval.py prompts/saas.md results_1
```

This runs the prompt through Claude Code SDK with the MCP server and saves results to `results_1/`.

### Options

- `--mcp` - Use the MCP server (runs `scripts/run-source.sh` by default)
- `--mcp-server <path>` - Use a custom MCP server
- `--no-structured-prompt` - Disable the structured prompt that asks for `<summary>`, `<feedback>`, `<response>` tags

### Output files

Results are saved to the specified directory:

- `output.txt` - Full Claude response
- **`transcript.md`** - **Full conversation transcript with all messages and tool calls. This is the key file to review when debugging or analyzing Claude's behavior.**
- `summary.md` - Extracted `<summary>` content (if present)
- `feedback.md` - Extracted `<feedback>` content (if present)
- `response.txt` - Extracted `<response>` content (if present)
- `out/` - Any files generated by Claude during execution
